<!--
  This html is not a part of angular project
  This form has to inserted to cms dashboard
  Keeping it here just keep track of it and ease of editing
-->
<form id="contact-form" method="post" role="form">

  <div class="messages"></div>

  <div class="controls">

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="form_name">First name *</label>
          <input id="form_name" type="text" name="name" class="form-control" placeholder="Please enter your firstname *" required="required" data-error="Firstname is required.">
          <div class="help-block with-errors"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="form_lastname">Last name *</label>
          <input id="form_lastname" type="text" name="surname" class="form-control" placeholder="Please enter your lastname *" required="required" data-error="Lastname is required.">
          <div class="help-block with-errors"></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="form_email">Email *</label>
          <input id="form_email" type="email" name="email" class="form-control" placeholder="Please enter your email *" required="required" data-error="Valid email is required.">
          <div class="help-block with-errors"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="form_phone">Phone</label>
          <input id="form_phone" type="tel" name="phone" class="form-control" placeholder="Please enter your phone">
          <div class="help-block with-errors"></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <label for="form_message">Message *</label>
          <textarea id="form_message" name="message" class="form-control" placeholder="Message for me *" rows="4" required data-error="Please,leave us a message."></textarea>
          <div class="help-block with-errors"></div>
        </div>
      </div>
      <div class="col-md-12">
        <input type="submit" class="btn btn-success btn-send" value="Send message">
      </div>
    </div>

  </div>

  </form>
<script>
  document.getElementById('contact-form').addEventListener('submit', function(e){
    e.preventDefault();
    let form = new FormData(e.target);
    let formData = {};
    for(let [key, value] of form.entries()){
      formData[key] = value;
    }
    if(window.fetchPost && typeof window.fetchPost === 'function'){
      window.fetchPost('contact_requests', formData)
            .then(function(){
              e.target.reset();
              if(typeof swalFire === 'function'){
                swalFire('Done!', 'We received your message, we will contact you soon', 'success');
              }
            })
            .catch(function(){
              if(typeof swalFire === 'function'){
                swalFire('Ops!', 'Something went wrong, please try again later', 'error');
              }
            })
    }
  });
</script>
